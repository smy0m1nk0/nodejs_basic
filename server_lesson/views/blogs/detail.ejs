<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/head') %>

<body>
   <%- include('../partials/nav') %>

    <div class="blogs content">
        <h2><%= blog.title %></h2>
        <p><%= blog.snippet %></p>
        <p><%= blog.body %></p>
        <br>
        <br>
        <br>
        <div style="display: flex; justify-content: space-between;">
            <button><a href="/blogs">Back</a></button>
            <button style="background-color: red;"><a class="delete" data-doc="<%= blog._id %>">Delete</a></button>
        </div>
    
    </div>

    <%- include('../partials/footer') %>

    <script>
        const deleteBtn = document.querySelector('.delete');
        deleteBtn.addEventListener('click', (e) => {
            // const id = e.target.getAttribute('data-doc');
            // fetch(`/blogs/${id}`, {
            //     method: 'DELETE'
            // }).then(res => {
            //     window.location.href = '/blogs';
            // });

            const endpoint =    `/blogs/${deleteBtn.dataset.doc}`;

            fetch(endpoint, {
                method: 'DELETE'
            }).then(res => res.json())
            .then(data =>  {
                // console.log(data);
                window.location.href = '/blogs';
            })
            .catch(err => {
                console.log(err);
            });
            
        });
    </script>
</body>
</html>